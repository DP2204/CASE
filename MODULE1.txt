<script>
const sidebar = document.getElementById("sidebar");
const menuBtn = document.getElementById("menuBtn");
const closeArrow = document.getElementById("closeArrow");
const overlay = document.getElementById("overlay");

function openSidebar() {
    sidebar.classList.add("active");
    overlay.classList.add("show");
}

function closeSidebar() {
    sidebar.classList.remove("active");
    overlay.classList.remove("show");
}

menuBtn.onclick = openSidebar;
closeArrow.onclick = closeSidebar;
overlay.onclick = closeSidebar;
</script>






from flask import Flask, render_template, request, jsonify
import datetime

app = Flask(__name__)

# Mock DB of available times
MOCK_DB = {
    "11-20-2025": ["01:00", "02:00", "05:00"],
    "11-21-2025": ["03:00", "04:00"],
    "11-22-2025": ["02:00", "06:00", "07:00"],
}

def get_available_times(date):
    return MOCK_DB.get(date, [])

# Convert yyyy-mm-dd to mm-dd-yyyy
def convert_date_format(date_str):
    try:
        dt = datetime.datetime.strptime(date_str, "%Y-%m-%d")
        return dt.strftime("%m-%d-%Y")
    except:
        return date_str

@app.route("/")
def home():
    return render_template("base.html")

@app.route("/sod-checks", methods=["GET", "POST"])
def sod_page():
    environment = request.form.get("environment", "prd")
    today = datetime.date.today().strftime("%Y-%m-%d")
    selected_date_raw = request.form.get("selected_date", today)
    selected_date = convert_date_format(selected_date_raw)
    selected_hour = request.form.get("selected_time", "")
    available_times = get_available_times(selected_date)
    report_html = "sample.html" if selected_hour else None

    return render_template(
        "SOD.html",
        environment=environment,
        selected_date=selected_date_raw,
        selected_hour=selected_hour,
        available_times=available_times,
        report_html=report_html
    )

# New route to get hours dynamically via AJAX
@app.route("/get_hours", methods=["POST"])
def get_hours():
    selected_date_raw = request.json.get("date")
    selected_date = convert_date_format(selected_date_raw)
    hours = get_available_times(selected_date)
    return jsonify(hours)

if __name__ == "__main__":
    app.run(debug=True)









<div style="background:#f2f2f2; padding: 20px; margin-top:40px; margin-left:20px;">

    <h2 style="color:#1E8C3A; margin-bottom:20px;">Start of Day Checks</h2>

    <form action="/sod-checks" method="POST"
          style="background: #F4F4F4; padding:20px; border-radius: 8px; box-shadow:0 0 5px rgba(0,0,0,0.2);">

        <!-- Environment Dropdown -->
        <label class="fw-bold">Environment:</label>
        <select id="envSelect" name="environment" class="form-control mb-3" required>
            <option value="prd" {% if environment=='prd' %}selected{% endif %}>PRD</option>
            <option value="stg" {% if environment=='stg' %}selected{% endif %}>STG</option>
        </select>

        <!-- Select Date -->
        <label class="fw-bold">Select Date:</label>
        <input type="date" id="dateField" name="selected_date" class="form-control mb-3" required
               value="{{ selected_date }}">

        <!-- Select Hour -->
        <label class="fw-bold">Select Hour:</label>
        <select id="hourField" name="selected_time" class="form-control mb-3" required>
            {% if available_times %}
                {% for t in available_times %}
                    <option value="{{ t }}" {% if t == selected_hour %}selected{% endif %}>{{ t }}</option>
                {% endfor %}
            {% else %}
                <option>No time available</option>
            {% endif %}
        </select>

        <button type="submit"
                style="width: 100%; background: #1E8C3A; color: white; padding:10px; border:none; font-size:16px;">
            Load Data
        </button>
    </form>

    <br><br>

    {% if report_html %}
        <iframe src="{{ report_html }}"
                style="width: 100%; height:700px; border:1px solid #aaa; border-radius:8px;"></iframe>
    {% else %}
        <p style="color: red;">No report found for this date/time.</p>
    {% endif %}

</div>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- AJAX to update hours dynamically -->
<script>
$(document).ready(function() {
    $('#dateField').on('change', function() {
        const date = $(this).val();
        if (date) {
            $.ajax({
                url: '/get_hours',
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ date: date }),
                success: function(hours) {
                    const $hourField = $('#hourField');
                    $hourField.empty().append('<option value="">--Select Hour--</option>');
                    if (hours.length > 0) {
                        hours.forEach(function(h) {
                            $hourField.append(`<option value="${h}">${h}</option>`);
                        });
                    } else {
                        $hourField.append('<option>No time available</option>');
                    }
                }
            });
        }
    });
});
</script>











from flask import Flask, render_template, request
import datetime

app = Flask(__name__)

# ---- MOCK DATABASE (Date â†’ Times) ----
MOCK_DB = {
    "11-20-2025": ["01:00", "02:00", "05:00"],
    "11-21-2025": ["03:00", "04:00"],
    "11-22-2025": ["02:00", "06:00", "07:00"],
}


# Fetch times from MOCK_DB
def get_available_times(date):
    return MOCK_DB.get(date, [])


# Convert yyyy-mm-dd â†’ mm-dd-yyyy to match MOCK_DB
def convert_date_format(date_str):
    try:
        dt = datetime.datetime.strptime(date_str, "%Y-%m-%d")
        return dt.strftime("%m-%d-%Y")
    except:
        return date_str


@app.route("/")
def home():
    # Redirect directly to SOD page
    return render_template("SOD.html",
                           environment="prd",
                           selected_date="",
                           selected_hour="",
                           available_times=[],
                           report_html=None)


@app.route("/sod-checks", methods=["GET", "POST"])
def sod_page():

    # Environment
    environment = request.form.get("environment", "prd")

    # Today's date
    today = datetime.date.today().strftime("%Y-%m-%d")

    # User-selected date (yyyy-mm-dd)
    selected_date_raw = request.form.get("selected_date", today)

    # Convert yyyy-mm-dd â†’ mm-dd-yyyy
    selected_date = convert_date_format(selected_date_raw)

    # Selected hour
    selected_hour = request.form.get("selected_time", "")

    # Fetch all times for that date
    available_times = get_available_times(selected_date)

    # Show report only when hour selected
    report_html = "sample.html" if selected_hour else None

    return render_template(
        "SOD.html",
        environment=environment,
        selected_date=selected_date_raw,
        selected_hour=selected_hour,
        available_times=available_times,
        report_html=report_html
    )


if __name__ == "__main__":
    app.run(debug=True)


<!DOCTYPE html>
<html>
<head>
    <title>SOD Checks</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>

<body style="background:#f2f2f2;">

<div style="padding:20px; margin-top:40px; margin-left:20px;">

    <h2 style="color:#1E8C3A; margin-bottom:20px;">Start of Day Checks</h2>

    <form action="/sod-checks" method="POST"
          style="background:#F4F4F4; padding:20px; border-radius:8px; box-shadow:0 0 5px rgba(0,0,0,0.1);">

        <!-- Environment Dropdown -->
        <label class="fw-bold">Environment:</label>
        <select id="envSelect" name="environment" class="form-control mb-3" required>
            <option value="prd" {% if environment == 'prd' %}selected{% endif %}>PRD</option>
            <option value="stg" {% if environment == 'stg' %}selected{% endif %}>STG</option>
        </select>

        <!-- Select Date -->
        <label class="fw-bold">Select Date:</label>
        <input type="date" id="dateField" name="selected_date" class="form-control mb-3"
               required value="{{ selected_date }}">

        <!-- Select Hour -->
        <label class="fw-bold">Select Hour:</label>
        <select name="selected_time" class="form-control mb-3" required>
            {% if available_times %}
                {% for t in available_times %}
                    <option value="{{ t }}" {% if t == selected_hour %}selected{% endif %}>{{ t }}</option>
                {% endfor %}
            {% else %}
                <option>No time Available</option>
            {% endif %}
        </select>

        <button type="submit"
                style="width:100%; background:#1E8C3A; color:white; padding:10px; border:none; font-size:16px;">
            Load Data
        </button>
    </form>

    <br><br>

    {% if report_html %}
        <iframe src="{{ report_html }}" style="width:100%; height:700px; border:1px solid #aaa; border-radius:8px;"></iframe>
    {% else %}
        <p style="color:red;">No report found for this date/time.</p>
    {% endif %}

</div>

<script>
    // Set default date only if user has not submitted the form yet
    window.onload = function () {
        let currentDate = new Date().toISOString().split("T")[0];

        {% if not selected_date %}
        document.getElementById("dateField").value = currentDate;
        {% endif %}
    }
</script>

</body>
</html>
55555555
<body>

<div style="padding: 20px; margin-top: 40px; margin-left: 20px;">

<form method="POST" action="/sod">

    <label style="font-weight:bold;">Select Date:</label>
    <input type="date"
           id="dateField"
           name="selected_date"
           value=""
           required
           style="width:100%; padding: 8px; border-radius: 6px; border:1px solid #ccc;">


    <label style="font-weight:bold;">Select Hour:</label>
    <select id="timeDropdown"
            name="selected_time"
            required
            style="width:100%; padding: 8px; margin:10px 0; border-radius: 6px; border:1px solid #ccc;">
        <option disabled selected>Select date first</option>
    </select>

</form>


<script>
// ---------- SET TODAY BY DEFAULT ----------
document.getElementById("dateField").value = new Date().toISOString().split("T")[0];


// ---------- WHEN DATE CHANGES â†’ FETCH TIME SLOTS ----------
document.getElementById("dateField").addEventListener("change", function () {

    let selectedDate = this.value;

    fetch("/get_time_slots", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ selected_date: selectedDate })
    })
    .then(res => res.json())
    .then(data => {

        let dropdown = document.getElementById("timeDropdown");
        dropdown.innerHTML = "";  // Clear old options

        if (data.time_slots.length > 0) {
            data.time_slots.forEach(t => {
                let opt = document.createElement("option");
                opt.value = t;
                opt.textContent = t;
                dropdown.appendChild(opt);
            });
        } else {
            let opt = document.createElement("option");
            opt.textContent = "No time available";
            dropdown.appendChild(opt);
        }
    });
});
</script>

</body>
final
@app.route("/get_time_slots", methods=["POST"])
def get_time_slots():
    data = request.get_json()
    selected_date = data.get("selected_date")
    time_slots = mock_db.get(selected_date, [])
    return jsonify({"time_slots": time_slots})
<script>
_______
document.getElementById("dateField").addEventListener("change", function () {

    let selectedDate = this.value;

    // Make POST call to Flask route
    fetch("/get_time_slots", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ selected_date: selectedDate })
    })
    .then(response => response.json())
    .then(data => {

        let timeDropdown = document.querySelector("select[name='selected_time']");
        timeDropdown.innerHTML = ""; // clear old values

        if (data.time_slots.length > 0) {
            data.time_slots.forEach(time => {
                let opt = document.createElement("option");
                opt.value = time;
                opt.textContent = time;
                timeDropdown.appendChild(opt);
            });
        } else {
            let opt = document.createElement("option");
            opt.textContent = "No time available";
            timeDropdown.appendChild(opt);
        }
    });
});
</script>
ddddd
from flask import Flask, render_template, request
import datetime

app = Flask(__name__)

# MOCK DB : Date format MUST be mm-dd-yyyy
MOCK_DB = {
    "11-20-2025": ["01:00", "02:00", "05:00"],
    "11-21-2025": ["03:00", "04:00"],
    "11-22-2025": ["02:00", "06:00", "07:00"]
}

def get_available_times(date):
    return MOCK_DB.get(date, [])

def convert_date_format(date_str):
    """Convert yyyy-mm-dd â†’ mm-dd-yyyy to match MOCK_DB"""
    try:
        dt = datetime.datetime.strptime(date_str, "%Y-%m-%d")
        return dt.strftime("%m-%d-%Y")
    except:
        return date_str

@app.route("/")
def home():
    return render_template("base.html")

@app.route("/sod-checks", methods=["GET", "POST"])
def sod_page():
    environment = request.form.get("environment", "prd")

    # Today's date in yyyy-mm-dd for HTML input
    today = datetime.date.today().strftime("%Y-%m-%d")
    selected_date_raw = request.form.get("selected_date", today)

    # Convert to match MOCK_DB
    selected_date = convert_date_format(selected_date_raw)

    selected_hour = request.form.get("selected_time", "")

    available_times = get_available_times(selected_date)

    # Static HTML Report
    report_html = "sample.html" if selected_hour else None

    return render_template(
        "SOD.html",
        environment=environment,
        selected_date=selected_date_raw,  # keep original format for UI
        selected_hour=selected_hour,
        available_times=available_times,
        report_html=report_html
    )

if __name__ == "__main__":
    app.run(debug=True)


---------------

from flask import Flask, render_template, request, jsonify
import datetime

app = Flask(__name__)

# ---- Mock database ----
mock_db = {
    "2025-01-10": ["10:00 AM", "11:00 AM", "02:00 PM"],
    "2025-01-11": ["09:00 AM", "01:00 PM"],
    "2025-01-12": ["12:00 PM", "03:30 PM"]
}


@app.route("/")
def index():
    return render_template("index.html")


# -----------------------------
# âœ… SOD PAGE ROUTE (You asked for this)
# -----------------------------
@app.route("/sod-checks", methods=["GET", "POST"])
def sod_checks():
    # Default environment and date
    environment = request.form.get("environment", "prd")
    today = datetime.date.today().strftime("%Y-%m-%d")
    selected_date = request.form.get("selected_date", today)
    selected_time = request.form.get("selected_time", "")

    # Fetch available times based on selected date
    available_times = mock_db.get(selected_date, [])

    # Only generate report if time is selected
    report_html = "sample.html" if selected_time else None

    return render_template(
        "sod.html",
        environment=environment,
        selected_date=selected_date,
        selected_time=selected_time,
        available_times=available_times,
        report_html=report_html
    )


# -----------------------------
# âœ… AJAX endpoint for auto-populating time dropdown
# -----------------------------
@app.route("/get_time_slots", methods=["POST"])
def get_time_slots():
    data = request.get_json()
    selected_date = data.get("selected_date")

    # Match date exactly with mock_db keys
    time_slots = mock_db.get(selected_date, [])

    return jsonify({"time_slots": time_slots})


if __name__ == "__main__":
    app.run(debug=True)
hhhhhhhh
DGood morning everyone,
Iâ€™m [Your Name], currently working as a Full Stack Developer Intern with GBIT ISPL â€“ Trade DPP, Mumbai. Over the last six months, Iâ€™ve been part of a very exciting project called Conserto, which has been a huge learning experience â€” both technically and personally.

So, what exactly is Conserto?
Conserto is an internal application developed for Trade Finance operations at BNP Paribas. In simple words, it helps organize and manage all customer trade requests between two countries or regions.

The Conserto application works across both Middle Office and Back Office operations â€” meaning it supports everything from the moment a trade request is received, till it is completely processed and recorded.

It is both an EDM â€” Electronic Document Management tool, and a Workflow Management system.

Think of it like a smart engine that automates and tracks the journey of a trade event â€” such as a Letter of Credit or Collection â€” right from creation to completion. Every document, every approval, and every correction is managed inside Conserto.


---

Key Functionalities of Conserto:

1ï¸âƒ£ Queue Management â€”
Conserto automatically organizes pending requests, identifies priorities, and shows them in a â€œTo-do list.â€ It helps users focus on whatâ€™s important first.

2ï¸âƒ£ Workflow Handling â€”
Each trade event passes through multiple validation levels â€” like 2-eye, 4-eye, or 6-eye checks â€” depending on business rules. This ensures accuracy, compliance, and traceability.

3ï¸âƒ£ Roles and Permissions â€”
Every user has a specific role:

Producers from the Middle Office initiate and validate transactions.

Processors in the Back Office handle the data entry and final processing.

The Center of Excellence team manages complex transactions.

And Investigators verify document attachments and handle claims.


4ï¸âƒ£ Transverse Features â€”
Conserto even allows communication between users, setting reminders, alerts, and managing throwbacks or reviews. It maintains a complete audit trail for every transaction, ensuring full transparency.


---

Now, coming to my contribution and learning:

In the initial weeks, we had detailed KT sessions to understand how the application actually fits into BNP Paribasâ€™s Trade ecosystem â€” how customer requests flow from Connexis Trade or SWIFT into Conserto, and then to iVision, where theyâ€™re processed and completed.

After the knowledge sessions, I was assigned a few JIRA tasks related to the Conserto tech stack, which includes Java, Spring Boot, Angular, and database handling.

Coming from a Python background, this was a completely new world for me. I still remember my first few days â€” debugging something simple felt like solving a mystery. ðŸ˜…

But slowly, with constant guidance from my mentors and teammates, I began to understand the structure â€” how every API, workflow, and front-end component plays its part.

I started working on small enhancements and bug fixes in modules like queue visualization and workflow tracking, and also explored how exceptions are handled during document validation.

What made this experience even better was how well the team supported me. The environment they created was incredibly warm â€” I could reach out anytime with questions, whether technical or functional. Daily stand-ups and review calls helped me stay on track and understand how my work contributed to the bigger picture.


---

What I truly learned from this project is that real-world development is not just about writing code â€” itâ€™s about understanding the business need behind every line of that code.

In college, we just built projects to submit. But here, I learned how each feature goes through multiple layers â€” development, validation, review, and deployment â€” all with real-time coordination between teams.

Conserto also taught me about collaboration â€” how different roles, from Middle Office to Back Office, work together in a single workflow system to deliver accurate results for clients across the globe.


---

If I describe my journey in one line, Iâ€™d say itâ€™s been like climbing a mountain â€” tough at the start, but every step brings a new view.
Each task, each review, and even each bug helped me learn something new.

The constant support from my managers and mentors played a huge role â€” they never let me feel left out. They balanced fun and learning perfectly, with engaging training sessions and open communication.


---

And if I look back, from the hackathon experience to understanding Consertoâ€™s workflows, from struggling with backend logic to finally seeing things work on production â€” itâ€™s been a complete transformation.

This internship didnâ€™t just make me a better developer â€” it taught me ownership, teamwork, and the joy of learning something new every single day.


---

To conclude, Iâ€™d like to say that Conserto wasnâ€™t just a project for me â€” it was a journey of discovery, patience, and growth. Iâ€™m truly grateful to my team, mentors, and the organization for creating an environment where learning never stops.

Thank you! ðŸ™

-----------------------------------66666-

during my six-month internship as a Full Stack Developer at GBIT ISPL â€“ Trade DPP, Mumbai, I worked on the Conserto application. Conserto is an EDM and Workflow Management tool that helps organize trade finance requests between two countries or regions. It manages every step of the trade lifecycle â€” from customer requests in Connexis Trade and SWIFT to back-office processing in iVision.

We started with KT sessions to understand the project, and then I was assigned small JIRA tasks. Coming from a Python background, it wasnâ€™t easy, but with my teamâ€™s guidance, I learned Java, Spring Boot, and Angular. Every task taught me something new. The environment was warm and encouraging â€” I never felt left out. This internship truly helped me grow â€” not just as a developer, but as a learner every single day.




@Override
public File generateXml(ExternalTNTRequest externalTandTRequest, String xmlFilePath) {
    log.info("Generating XML for prodCode: {} and eventId: {}", 
             externalTandTRequest.getProdCode(), externalTandTRequest.getEventId());

    IcTnxRecord icTnxRecord = new IcTnxRecord();

    // Set all common mandatory fields
    setCommonFields(icTnxRecord, externalTandTRequest);

    // Set application date always if no refId
    if (StringUtils.isBlank(externalTandTRequest.getConnexisRequestRefId())) {
        icTnxRecord.setAppl_date(
            DateTimeUtil.getDateInDDMMYYYY(externalTandTRequest.getEventCreationDateTime())
        );

        // ðŸ‘‰ Only set currency + amounts if ConnexisRequestRefId is missing
        if (StringUtils.isNotBlank(externalTandTRequest.getCurCode())) {
            icTnxRecord.setTnx_cur_code(externalTandTRequest.getCurCode());
            icTnxRecord.setIc_cur_code(externalTandTRequest.getCurCode());
        }

        if (externalTandTRequest.getTnxAmt() != null) {
            String formattedAmt = formatAmount(externalTandTRequest.getTnxAmt());
            icTnxRecord.setTnx_amt(formattedAmt);
            icTnxRecord.setIc_amt(formattedAmt);
            icTnxRecord.setIc_liab_amt(formattedAmt);
        }
    }

    // Drawer / Customer details
    if (StringUtils.isNotBlank(externalTandTRequest.getCustomerId()) && 
        StringUtils.isNotBlank(externalTandTRequest.getBranchCode())) {

        String drawerReference = externalTandTRequest.getCustomerId();
        String branchCode = externalTandTRequest.getBranchCode();

        if (drawerReference.length() >= 5 
            && drawerReference.substring(0, 5).equalsIgnoreCase(branchCode)) {
            icTnxRecord.setDrawer_reference(drawerReference);
        }
    }

    icTnxRecord.setDrawee_name(externalTandTRequest.getCounterPartyName());
    icTnxRecord.setCompany_name(externalTandTRequest.getEbCusId());
    icTnxRecord.setDrawer_abbv_name(externalTandTRequest.getEbBanId());

    AdditionalField additionalField = new AdditionalField(
        "mo_event_id", "string", "transaction", externalTandTRequest.getEventId()
    );
    icTnxRecord.setAdditionalFields(List.of(additionalField));

    return generateXmlFile(externalTandTRequest.getEventId(), icTnxRecord, xmlFilePath);
}

// helper
private String formatAmount(String amt) {
    try {
        double value = Double.parseDouble(amt);
        return String.format("%.2f", value); // always 2 decimal places
    } catch (NumberFormatException e) {
        return amt; // fallback
    }
}




----------------------------------


package com.bnpparibas.mql.helper;

import com.bnpparibas.dpw.controller.model.Request;
import com.bmpparibas.dpw.mql.model.ExternalTNTRequest;
import com.bmpparibas.dpw.referential.model.ExternalTrackAndTraceMapping;

import java.time.LocalDateTime;

public class CXTHelper {

    private CXTHelper() {}

    public static ExternalTNTRequest toExternalTNTRequest(
            ExternalTrackAndTraceMapping mapping,
            Request createdRequest
    ) {
        if (mapping == null) return null;

        ExternalTNTRequest req = new ExternalTNTRequest();

        // Mapping fields from ExternalTrackAndTraceMapping
        req.setBranchCode(mapping.getBranchCode());
        req.setCountryCode(mapping.getCountryCode());
        req.setStatusCxt(mapping.getStatusCxt());
        req.setProdCode(mapping.getProdCode());
        req.setTnxTypeCode(mapping.getTnxTypeCode());
        req.setSubTnxTypeCode(mapping.getSubTnxTypeCode());
        req.setProdStatCode(mapping.getProdStatCode());
        req.setTnxStatCode(mapping.getTnxStatCode());

        // Mapping fields from createdRequest
        if (createdRequest != null && createdRequest.getEvent() != null) {
            req.setEventId(createdRequest.getEvent().getId());
            if (createdRequest.getEvent().getSystemCreationDate() != null) {
                req.setEventCreationDateTime(createdRequest.getEvent().getSystemCreationDate());
            } else {
                req.setEventCreationDateTime(LocalDateTime.now());
            }
        } else {
            req.setEventCreationDateTime(LocalDateTime.now());
        }

        // Optional fields you might have in ExternalTNTRequest
        // Leave null if no source available
        req.setTnxAmt(null);
        req.setCurCode(null);
        req.setCounterPartyName(null);
        req.setCustomerId(null);
        req.setConnexisRequestRefId(null);
        req.setConnexisRequestTnxId(null);
        req.setEbCusId(null);
        req.setEbBanId(null);
        req.setBoStatusUpdate(null);
        req.setSubTnxStatCode(null);
        req.setMfr(null);
        req.setLivr(null);
        req.setUmfr(null);

        return req;
    }
}



-------------------_----------------------


public class CXTHelper {

    private CXTHelper() {
        // Utility class
    }

    public static ExternalTNTRequest toExternalTNTRequest(ExternalTrackAndTraceMapping mapping,
                                                          ExternalTNTRequest createdRequest,
                                                          ConnexisData connexisData) {
        if (mapping == null && createdRequest == null && connexisData == null) {
            return new ExternalTNTRequest();
        }

        ExternalTNTRequest request = new ExternalTNTRequest();

        // --- Mapping fields from Referential (mapping) ---
        if (mapping != null) {
            request.setBranchCode(mapping.getBranchCode());
            request.setCountryCode(mapping.getCountryCode());
            request.setPgpeCode(mapping.getPgpeCode());
            request.setAction(mapping.getAction());
            request.setStatusCst(mapping.getStatusCst());
            request.setStatusCxt(mapping.getStatusCxt());
            request.setProdCode(mapping.getProdCode());
            request.setTnxTypeCode(mapping.getTnxTypeCode());
            request.setSubTnxTypeCode(mapping.getSubTnxTypeCode());
            request.setProdStatCode(mapping.getProdStatCode());
            request.setTnxStatCode(mapping.getTnxStatCode());
        }

        // --- Fields from created request (input request) ---
        if (createdRequest != null) {
            request.setEventId(createdRequest.getEventId());
            request.setMfr(createdRequest.getMfr());
            request.setLivr(createdRequest.getLivr());
            request.setUmfr(createdRequest.getUmfr());
            request.setSubTnxStatCode(createdRequest.getSubTnxStatCode());
            request.setBoStatusUpdate(createdRequest.getBoStatusUpdate());
            request.setEventCreationDateTime(createdRequest.getEventCreationDateTime());
            request.setTnxAmt(createdRequest.getTnxAmt());
            request.setCurCode(createdRequest.getCurCode());
            request.setCounterPartyName(createdRequest.getCounterPartyName());
            request.setCustomerId(createdRequest.getCustomerId());
            request.setEbCusId(createdRequest.getEbCusId());
            request.setEbBanId(createdRequest.getEbBanId());
        }

        // --- Fields from ConnexisData (if present) ---
        if (connexisData != null) {
            request.setConnexisRequestRefId(connexisData.getRequestRefId());
            request.setConnexisRequestTnxId(connexisData.getRequestTnxId());
        }

        return request;
    }
}








+++++++++++++++++++++

package com.bnpparibas.mql.helper;

import com.bnpparibas.dpw.controller.model.Request;
import com.bnpparibas.dpw.mql.model.ExternalTNTRequest;
import com.bnpparibas.dpw.referential.model.ExternalTrackAndTraceMapping;

import java.time.LocalDateTime;

public class CXTHelper {

    private CXTHelper() {}

    public static ExternalTNTRequest toExternalTNTRequest(
            ExternalTrackAndTraceMapping mapping,
            Request createdRequest,
            ConnexisData connexisData) {

        if (mapping == null) return null;

        ExternalTNTRequest req = new ExternalTNTRequest();

        // ðŸ”¹ From Referential Mapping (codes)
        req.setBranchCode(mapping.getBranchCode());
        req.setCountryCode(mapping.getCountryCode());
        req.setProdCode(mapping.getProdCode());
        req.setTnxTypeCode(mapping.getTnxTypeCode());
        req.setSubTnxTypeCode(mapping.getSubTnxTypeCode());
        req.setProdStatCode(mapping.getProdStatCode());
        req.setTnxStatCode(mapping.getTnxStatCode());
        req.setStatusCxt(mapping.getStatusCxt());

        // ðŸ”¹ From Event (createdRequest)
        if (createdRequest != null && createdRequest.getEvent() != null) {
            req.setEventId(createdRequest.getEvent().getId());
            req.setEventCreationDateTime(
                createdRequest.getEvent().getSystemCreationDate() != null
                        ? createdRequest.getEvent().getSystemCreationDate()
                        : LocalDateTime.now()
            );

            // Example business fields from Event
            req.setCompanyName(createdRequest.getEvent().getCompanyName());
            req.setTnxAmt(createdRequest.getEvent().getTransactionAmount());
            req.setCurCode(createdRequest.getEvent().getCurrency());
            req.setApplicantAbbvName(createdRequest.getEvent().getApplicantName());
            req.setBeneficiaryName(createdRequest.getEvent().getBeneficiaryName());
        }

        // ðŸ”¹ From ConnexisData (if additional info required)
        if (connexisData != null) {
            req.setCustomerId(connexisData.getCustomerId());
            req.setConnexisRequestRefId(connexisData.getRequestRefId());
            req.setConnexisRequestTnxId(connexisData.getRequestTnxId());
        }

        // ðŸ”¹ Static / derived fields if required
        req.setBoStatusUpdate("Y"); // defaulted as in expected XML

        return req;
    }
}






------------------------------------------


package com.yourcompany.project.helper;

import com.yourcompany.project.model.ExternalTrackAndTraceMapping;
import com.yourcompany.project.model.ExternalTNTRequest;
import com.yourcompany.project.model.Request;

public final class CXTHelper {

    private CXTHelper() {
        // Utility class
    }

    public static ExternalTNTRequest toExternalTNTRequest(
            ExternalTrackAndTraceMapping mapping,
            Request createdRequest) {

        if (mapping == null) return null;

        ExternalTNTRequest req = new ExternalTNTRequest();

        // ----- fields coming from mapping -----
        req.setBranchCode(mapping.getBranchCode());
        req.setCountryCode(mapping.getCountryCode());
        req.setPgpeCode(mapping.getPgpeCode());
        req.setAction(mapping.getAction());
        req.setStatusCst(mapping.getStatusCst());
        req.setStatusCxt(mapping.getStatusCxt());
        req.setProdCode(mapping.getProdCode());
        req.setTnxTypeCode(mapping.getTnxTypeCode());
        req.setSubTnxTypeCode(mapping.getSubTnxTypeCode());
        req.setProdStatCode(mapping.getProdStatCode());
        req.setTnxStatCode(mapping.getTnxStatCode());

        // ----- info coming from createdRequest -----
        if (createdRequest != null && createdRequest.getEvent() != null) {
            req.setEventId(createdRequest.getEvent().getId());
        }

        return req;
    }
}